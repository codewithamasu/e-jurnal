# 'services' adalah daftar "komputer mini" (kontainer) yang ingin kita jalankan
services:
  # Kita beri nama layanan kita 'db'
  db:
    # Menggunakan image MySQL versi 8.0
    image: mysql:8.0
    
    # Beri nama kontainer agar mudah dikenali di 'docker ps'
    container_name: mysql_ejurnal_guru
    
    # Selalu restart kontainer ini jika crash
    restart: always
    
    # Variabel lingkungan untuk konfigurasi MySQL
    environment:
      MYSQL_ROOT_PASSWORD: hamasu  # GANTI INI
      MYSQL_DATABASE: db_ejurnal_guru_smkn5              # Opsional: langsung buat database
    
    # Petakan port 3306 di Mac Anda ke port 3306 di kontainer
    ports:
      - "3306:3306"
      
    # ⭐️ BAGIAN TERPENTING: Volume
    # Ini "menghubungkan" folder /var/lib/mysql di dalam kontainer
    # ke sebuah volume bernama 'mysql-data' yang dikelola Docker.
    # Data Anda akan AMAN di sini.
    volumes:
      - mysql-data:/var/lib/mysql

# 'volumes' adalah tempat kita mendefinisikan volume yang kita sebut di atas
volumes:
  mysql-data:
    # 'driver: local' adalah default, tidak perlu ditulis,
    # tapi ini menegaskan kita menyimpan data di Mac kita.